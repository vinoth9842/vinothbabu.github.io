---
layout: post
title: สรุป High performance Scientific Computing จากงาน Code Mania 1010
author: Rangsiman Ketkaew
date: "2019-12-17 02:03:00 +0700"
category:
  - code-mania
  - programming
  - Linux
  - HPC
  - Scientific-computing
  - conference
  - benchmark
summary: สรุป High performance Scientific Computing จากงาน Code Mania 1010
thumbnail: posts/code-mania-cover.jpg
permalink: content/19
comments: true
---

<br>

## Code Mania 1010

&nbsp;&nbsp;&nbsp;สวัสดีครับ บล็อกนี้ผมจะมาสรุปทอล์กของผมจากงาน [Code Mania 1010](https://www.facebook.com/events/true-digital-park/code-mania-1010-all-about-passion/1383461861822935/) ซึ่งเป็นงานที่รวมเหล่าโปรแกรมเมอร์ไทยมาแลกเปลี่ยนความรู้กัน ซึ่งในการจัดงานแต่ละครั้งก็จะมี Theme ของงานแตกต่างกันไป ครั้งนี้ Theme ของงานคือ "All About Passion" และสถานที่จัดงานคือ
True Digital Park (TDPK) กรุงเทพมหานคร เมื่อวันอาทิตย์ที่ 15 ธันวาคม พ.ศ. 2562

&nbsp;&nbsp;&nbsp;ในช่วงเช้าของงานก็จะมี Keynote และการบรรยายเกี่ยวกับกฎหมายของการจ้างงานหรือทำสัญญาที่เกี่ยวข้องกับโปรแกรมเมอร์ และในช่วงบ่ายก็จะมี 3 Sessions ที่รันไปพร้อม ๆ กัยก็คือ 2 Sessions แรกจะเป็นทอล์กและอีก Session ก็จะเป็น Workshop ครับ ทอล์กส่วนมากในครั้งนี้ก็จะพูดเกี่ยวกับเทคโนโลยีใหม่ ๆ เช่น Serverless, Blockchain, Cloud และ Machine learning แต่ทอล์กของผมซึ่งได้พูดเป็นลำดับที่ 3 ของช่วงบ่ายจะแตกต่างกับทอล์กอื่นมากพอสมควรและรู้สึกขอบคุณคนเข้าฟังทุก ๆ ท่านมากครับที่ให้ความสนใจ

<br>

## ผมพูดเกี่ยวกับอะไร

<img src="/assets/img/posts/code-mania-1.png" width="100%" height="auto" />

&nbsp;&nbsp;&nbsp;หัวข้อของทอล์กคือ "Low-Level Programming Language for High performance Scientific Computing" หรือ การเขียนโปรแกรมคอมพิวเตอร์ระดับล่างสำหรับการคำนวณทางวิทยาศาสตร์ขั้นสูง ในช่วงแรกของทอล์กผมได้ยกตัวอย่างภาพยนตร์เรื่องต่าง ๆ ที่ล้วนแล้วแต่มีเนื้อหาเกี่ยวกับคณิตศาสตร์และวิทยาศาสตร์ทั้งสิ้น หลาย ๆ คนรู้จักภาพยนตร์ที่ผมยกตัวอย่างให้ดู เช่น Interstellar ที่จะเกี่ยวข้องกับฟิสิกส์ดาราศาสตร์ อวกาศ หลุมดำ รูหนอน เป็นต้น หรือซีรีย์ Breaking Bad ที่เป็นเรื่องราวของครูสอนเคมีมัธยมที่ร่วมมือกับลูกศิษย์ของตัวเองช่วยกันสังเคราะห์ยาเสพติดที่มีความบริสุทธิ์สูงเพื่อนำเงินมารักษาโรคมะเร็ง  ต่อจากนั้นผมก็ได้อธิบายเชื่อมโยงไปถึงงานที่เกี่ยวกับวิทยาศาสตร์ว่าการที่เราจะทำงานด้านนี้ เราไม่จำเป็นที่จะต้องอยู่แต่ในห้องแล็ปที่มีแต่สารเคมีเพียงอย่างเดียว แต่เราสามารถใช้การเขียนโปรแกรมมาพัฒนาซอฟต์แวร์เพื่อให้มันคำนวณหรือทำนายผลการทดลองให้เราออกมาเป็นตัวเลข เพื่อให้รู้ถึงโอกาสหรือความเสี่ยงต่าง ๆ ล่วงหน้าก่อนที่เราจะนำไปสู่การทดลองจริง ๆ ซึ่งศาสตร์ด้านนี้เรียกว่า Scientific computing หรือ Computational science

<br>

<img src="/assets/img/posts/code-mania-6.png" width="100%" height="auto" />

&nbsp;&nbsp;&nbsp;แต่จริง ๆ แล้ว Scientific computing แตกต่างจาก Computer science และ Software engineering โดยสิ้นเชิง นักวิทยาศาสตร์เชิงคำนวณ (Computational scientist) ไม่ได้เน้นไปที่การเข้าใจกระบวนการทำงานของ CPU หรือการสร้างอัลกอริทึมของคอมพิวเตอร์ใหม่ ๆ แต่เราเน้นไปที่แอพพลิเคชัน เช่น ใช้โปรแกรมเพื่อแก้สมการทางเคมี ฟิสิกส์หรือชีววิทยา ทำนายปรากฏการณ์ทางธรรมชาติต่าง ๆ ที่มนุษย์ไม่สามารถทำได้ด้วยตัวเอง (จริง ๆ ทำได้ แต่อาจจะใช้เวลาหลายสิบปี) และตอบโจทย์งานทางด้านอื่น ๆ เช่น การแพทย์ เศรษซกิจ สังคม เป็นต้น เพราะฉะนั้นก็จะไม่แปลกเลยถ้าหากโค้ดที่นักวิทยาศาสตร์ได้เขียนขึ้นมาเองนั้นมันทำงานหรือรันได้ช้าถึงช้ามาก ๆ  นั่นก็เพราะเราไม่ได้เรียนหรือเน้นมาทางด้าน Software Design โดยตรง นั่นคือ Scientific computing ก็ยังต้องพึ่งพาสาย Computer science และ Software engineering เช่นกัน

<br>

## อยากเห็นภาพมากกว่านี้

<img src="/assets/img/posts/code-mania-2.png" width="100%" height="auto" />

&nbsp;&nbsp;&nbsp;ตัวอย่างของ Scientific computing ที่น่าสนใจและสามารถนึกภาพตามได้ง่าย ๆ ก็จะมี การคำนวณทำนายหุ้น การทำนายการเกิดแผ่นดินไหวหรืออุทกภัย การพยากรณ์อากาศ การศึกษาคุณสมบัติต่าง ๆ ของอะตอมและโมเลกุล การออกแบบและจำลองยาที่เข้าไปทำลายเชื้อโรคในเซลล์ของสิ่งมีชีวิต เป็นต้น และ ณ ปัจจุบันนี้ยังสามารถประยุกต์ไปใช้กับปัญญาประดิษฐ์ได้อีกด้วย และนอกจากนี้ยังมีแอพพลิเคชั่นอื่น ๆ อีกเป็นร้อยเลยนอกเหนือจากที่ผมยกตัวอย่างมานั่นก็เพราะ Scientific computing เป็นศาสตร์ที่กว้างมาก ๆ

<br>

## แล้วมันเกี่ยวกับ HPC ยังไง

&nbsp;&nbsp;&nbsp;การที่จะทำให้โปรแกรมที่เราพัฒนาขึ้นทำงานหรือคำนวณผลลัพธ์ที่เราต้องการออกมาได้เร็ว ๆ นั้น เราต้องการคอมพิวเตอร์ที่มีประสิทธิภาพสูงในการรันโปรแกรม ไม่ใช่คอมพิวเตอร์หรือโน๊ตบุ๊คทั่วไปที่เราใช้กัน แต่จะต้องเป็น Supercomputer (ซุปเปอร์คอมพิวเตอร์) สมรรถนะสูงที่ถูกสร้างและออกแบบมาเพื่อ High Performance Computing (HPC) หรือการคำนวณสมรรถนะสูง ซึ่ง Supercomputer จะเป็นการใช้ CPU หลายร้อยหรือหลายพัน cores มาช่วยกันรันเพื่อแก้ปัญหาสิ่ง ๆ เดียว แน่นอนว่ามันย่อมให้ผลลัพธ์ของการคำนวณที่เร็วมาก ๆ ซึ่งการจะเข้าถึงทรัพยากรหรือเข้าไป HPC นั้นก็จะต้องผ่านผู้ให้บริการที่มีอยู่หลายเจ้าด้วยกัน หลายคนก็น่าจะรู้จักผู้ให้บริการ Cloud Computing เช่น AWS, Google Cloud Platform และ Microsoft Azure กันอย่างแน่นอน ซึ่งผู้ให้บริการเหล่านี้นี่เองก็จะให้บริการทั้ง Virtual machine และ service (การบริการ) อื่น ๆ ที่ช่วยอำนวยความสะดวกให้เราในการคำนวณงานแบบหนัก ๆ ได้ แต่ในวงการวิชาการนั้นก็จะมีองค์กรทางการศึกษาที่มีทุนสนับสนุนและได้ให้นักศึกษา อาจารย์และนักวิจัยได้เข้าไปใช้ Supercomputer เพื่อทำงานวิจัยต่อไป

<br>

## ก็เลยลองยกตัวอย่าง ..

&nbsp;&nbsp;&nbsp;ถ้าเล่าให้ฟังอย่างเดียวก็คงจะไม่เห็นภาพ ผมก็เลยมีการแสดง Demo ให้ดูด้วย ซึ่งไม่รู้ว่า Demo ของผมทำให้คนฟังเข้าใจมากขึ้นหรือทำให้งงมากกว่าเดิมกันแน่

### Demo 1

<figure>
<img src="/assets/img/posts/code-mania-3.png" width="100%" height="auto" />
<figcaption><center>
ตัวอย่างผลการทดสอบความเร็วของ iPhone 6S Plus ด้วย Mobile Linpack
</center></figcaption>
</figure>

<br>

&nbsp;&nbsp;&nbsp;สมมติว่าผมต้องการซื้อโทรศัพท์หรือโน๊ตบุ๊คใหม่สักเครื่องนึง แน่นอนว่าเราก็อาจจะมีรุ่นที่เราลังเลประมาณ 2-3 รุ่น เมื่อเราเดินไปที่ร้านขายอุปกรณ์ไอทีตามห้างใหญ่ ๆ ก็จะมีพนักงานขายรีบเข้ามาอธิบายสรรพคุณและเชียร์เราให้ซื้อรุ่นนี้หรือรุ่นนั้นทันที แน่นอนว่าทุกคนอยากได้โทรศัพท์หรือโน๊ตบุ๊คที่เร็วและมี CPU ที่แรง ๆ แล้วเราจะรู้ได้ไงว่ารุ่นไหนที่มันจะเร็วกว่ากัน? เราจะเชื่อพนักงานขายได้มากน้อยแค่ไหน? กล่าวคือเราควรจะต้องมีการประเมินและเปรียบเทียบประสิทธิภาพ (Benchmarking) ของอุปกรณ์ชิ้นนั้นก่อนซื้อครับ ใช้แล้วครับ ใน Demo นี้ผมได้สอนวิธีการเช็คความเร็วของโทรศัพท์แบบง่าย ๆ ที่ทุกคนสามารถทำได้ภายในเวลาไม่กี่นาทีและได้ผลลัพธ์ที่แม่นยำ (แม้แต่พนักงานขายยังต้องอึ้ง) โดยใช้แอพพลิเคชันที่ชื่อว่า Mobile Linpack (Download ได้ฟรีทั้ง iOS และ Android) เมื่อดาวโหลดแอพเสร็จ เปิดแอพ แล้วกดรันเลย แอพมันจะคำนวณคะแนนออกมาให้ พร้อมทั้งมี Ranking เปรียบเทียบความเร็วของมือถือเรากับซุปเปอร์คอมพิวเตอร์ตัวแรงที่ญี่ปุ่นให้อีกด้วย

### Demo 2

<figure>
<img src="/assets/img/posts/code-mania-4.png" width="100%" height="auto" />
<figcaption><center>
ตัวอย่างผลการทดสอบความเร็วของ Chalawan Cluster ด้วย Intel MP Linpack
</center></figcaption>
</figure>

<br>

&nbsp;&nbsp;&nbsp;ยังไม่พอครับ ผมยังมีการยกตัวอย่างการวัดความเร็วหรือประสิทธิภาพของเครื่องซุปเปอร์คอทพิวเตอร์ให้ดูด้วย ถามว่ามันมีความสำคัญยังไง? ยกตัวอย่างง่าย ๆ เช่น เราไปใช้บริการ Cloud ของ Amazon นั่นก็คือ AWS EC2 แล้วกันนะ สมมติว่าเราเรียกใช้ Compute Node สัก 10 เครื่อง โอ้วโหววว ถ้าเปิดทิ้งไว้นาน ๆ หลาย ๆ วันหรือหลายเดือนนี่คงเสียเงินเยอะแน่นอน แล้วทีนี้เราจะรู้ได้ไงว่า Compute Node ทั้ง 10 เครื่องนี้มันทำงานได้คุ้มค่ากับเวลาที่เราต้องเสียไปและเครื่องเหล่านี้มันเร็วจริงตามที่ AWS เคลมไว้? วิธีที่จะรู้ได้ก็คือการวัดความเร็วนั่นเอง โดย Demo ก็จะคล้าย ๆ กับ Demo ที่แล้ว แต่มันจะซับซ้อนกว่านะ จะต้องพอมีความรู้เกี่ยวกับ Architecture และ Linux มาบ้าง คือเราจะวัดความเร็วออกมาเป็นคะแนนโดยการใช้โปรแกรมที่ชื่อว่า Linpack ซึ่งมันเป็นซอฟต์แวร์ตัวเดียวกันกับที่ทางเว็บไซต์ TOP500 เขาใช้วัดความเร็วของซุปเปอร์คอมพิวเตอร์ทั่วโลกและตัดอันดับทุก ๆ ปี ปีละ 2 ครั้ง [โดยตอนนี้ Supercomputer ที่เร็วที่สุดในโลก SUMMIT ของอเมริกานั่นเอง](https://www.top500.org/lists/2019/11/) และถ้าใครสนใจรายละเอียดของการใช้ Linpack ก็อ่านเพิ่มได้ที่บล็อกในเว็บไซต์เก่าของผมครับ [Benchmark Your Cluster using Intel Distribution for LINPACK Benchmark](https://sites.google.com/site/rangsiman1993/comp-env/test-and-benchmarks/benchmark-hpc-intel-linpack)

<br>

## อิหยังวะ?

<img src="/assets/img/posts/code-mania-5.png" width="100%" height="auto" />

<br>

&nbsp;&nbsp;&nbsp;ระหว่างที่ผมกำลังพูดอยู่นั้นผมสังเกตเห็นได้เลยว่าหลาย ๆ คนงงแน่นอนครับว่าผมกำลังพูดเกี่ยวกับอะไร จริง ๆ แล้ววัตถุประสงค์ของการมางานนี้ก็คือกระบวนการทำงานของคนที่ทำงานทางด้านนี้ ซึ่งกระบวนการคร่าว ๆ ที่นักวิทยาศาสตร์เชิงคำนวณมักจะทำก็จะเป็นขั้นตอนดังนี้

1. ตั้งปัญหาทางคณิตศาสตร์หรือวิทยาศาสตร์ที่ต้องการแก้
2. ใช้ Programming language เพื่อพัฒนาซอฟต์แวร์
3. ใช้โปรแกรมในข้อ 2 ไปแก้ปัญหาในข้อ 1
4. ใช้ Supercomputer เพื่อทำให้ข้อ 3 เสร็จเร็วขึ้น
5. วิเคราะห์และสรุปผลต่อไป

จะเห็นว่าเราไม่ได้เน้นที่ API หรือความสวยงามและหน้าตาของโปรแกรม (UX/UI) เลย เราสนใจแต่เพียงตัวเลขที่คำนวณหรือทำนายออกมานั้นจะต้องถูกต้องและแม่นยำและโปรแกรมของเราต้องคำนวณออกมาได้รวดเร็ว

&nbsp;&nbsp;&nbsp;ท้ายที่สุดแล้วมันไม่สำคัญว่าภาษาที่เราจะใช้ในการเขียนนั้นมันจะ Low หรือจะ High ขอแค่เราสามารถเขียนเพื่อให้คอมพิวเตอร์หรือเครื่องสามารถทำงานให้เราได้ตามที่ต้องการก็พอแล้ว เพราะระดับของภาษาถูกกำหนดขึ้นมาโดยอ้างอิงจากการที่เรามนุษย์เป็นตัวเทียบ ภาษาที่เราใช้พูดคุยกันอยู่ทุกวันนี้จึงถือว่าอยู่สูงกว่าภาษาโปรแกรมมิ่งทั้งหมด ดังนั้นทุกภาษจึงเป็น Low-Level ทั้งหมดครับ

<br>

## สิ่งที่ผมอยากบอกก็คือ

&nbsp;&nbsp;&nbsp;ในโลกของ Programming นั้นมันช่างกว้างใหญ่ไพศาลมาก ที่ผมกำลังจะบอกก็คือมันไม่ได้มีแค่ Web & App เท่านั้น แต่มันยังมีสิ่งที่เรียกว่า Scientific computing อยู่ด้วย ซึ่งสิ่งเหล่านี้มันอาจจะดูเหมือนว่ามันไกลตัวเรามาก อะไรก็ไม่รู้ซับซ้อนวุ่นวายไปหมด สมการนู่นนี่นั่น ปวดหัวตาลาย จริง ๆ แล้วมันก็ปวดหัวจริง ๆ ฮ่า ๆ :P

<img src="/assets/img/posts/code-mania-7.png" width="100%" height="auto" />

<br>

&nbsp;&nbsp;&nbsp;แท้จริงแล้วคณิตศาสตร์และวิทยาศาสตร์อยู่รอบตัวเรา มันคือกระบวนการ วิธีคิด หลักการและเหตุผล การตัดสินใจ การลองผิดลองถูกและที่สำคัญคือความท้าทายในการค้นพบสิ่งใหม่ ๆ แต่การที่จะเรียนรู้วิทยาศาสตร์ได้อย่างมีความสุขและสนุกกับมันนั้นเราจะต้องมี Passion ด้วยนั่นเอง :)

<br>

## สุดท้ายแล้ว

&nbsp;&nbsp;&nbsp;สิ่งที่ผมต้องการจะบอกก็คืออยากให้คนฟังทุก ๆ คนได้เรียนรู้และเข้าใจนักวิทยาศาสตร์เชิงคำนวณ ในขณะเดียวกันผมเองก็ได้รับความรู้และแลกเปลี่ยนทัศนคติหรือมุมมองใหม่ ๆ กับเพื่อน ๆ (ที่เพิ่งไปรู้จักกันในงาน) หลาย ๆ คนด้วย โดยส่วนตัวผมคิดว่าการที่มีการจัดงานประเภทนี้ถือว่าดีมาก ๆ และอยากจะขอเป็นกำลังใจให้กับทางผู้จัดงานให้มีการจัดกิจกรรมดี ๆ แบบนี้ออกมาเรื่อย ๆ อีกนะครับ _Keep Fighting!_

<br>

## เพิ่มเติม

&nbsp;&nbsp;&nbsp;ถ้าใครอยากพูดคุยเกี่ยวกับ Linux, Programming, HPC หรือ Cloud Computing สามารถทักมาคุยกันได้นะครับที่ FB: "[Nutt Rangsiman](https://www.facebook.com/rangsiman1993)" หรือเข้าร่วมเป็นสมาชิกของกลุ่ม "[HPC Thailand](https://www.facebook.com/groups/2485600791681924/)" ครับ แล้วเจอกันกิจกรรมอื่น ๆ อีกนะครับ

สำหรับ Slide สามารถ [Download ได้ที่นี่เลยครับ (PDF)](https://1drv.ms/b/s!Ao0M17vQCvR8guop5ORd8del88cclA?e=4wWOyl) และไฟล์ของ Demo อยู่ที่ [https://cutt.ly/hpc-codemania-rangsiman](https://cutt.ly/hpc-codemania-rangsiman)

<br>

รังสิมันต์ เกษแก้ว
